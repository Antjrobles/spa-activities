<!DOCTYPE html>
<html lang="es">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Marco y Julia Activity Hub</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script
          src="https://cdn.jsdelivr.net/gh/alpinejs/alpine@v2.8.2/dist/alpine.min.js"
          defer></script>
  <link
        rel="stylesheet"
        href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" />
  <link href="main.css" rel="stylesheet" />
</head>

<body
      class="min-h-screen bg-[radial-gradient(ellipse_at_bottom,_var(--tw-gradient-stops))] from-gray-400 via-black to-black text-gray-800">
  <div class="container mx-auto px-4 py-8" x-data="activityHub()">
    <!-- Título Principal -->
    <div class="text-center mb-12">
      <h1
          class="mt-1 bg-gradient-to-r from-pink-500 via-red-500 to-yellow-500 bg-clip-text text-4xl font-extrabold uppercase tracking-tighter text-transparent sm:text-5xl lg:text-7xl"
          id="titulo">
        Marco y Julia Activity Hub
      </h1>
      <!-- MODIFICADO: Texto inicial -->
      <p class="text-gray-400" x-show="activeTab === null">Pincha en tu nombre e introduce tu clave para ver las
        actividades</p>
      <p class="text-gray-400" x-show="activeTab !== null">¡Hola de nuevo! Explora tus actividades.</p>
      <!-- Podríamos añadir un botón de reset aquí si quisiéramos -->
      <!-- <button @click="resetVisited()" class="mt-2 text-xs text-gray-500 hover:text-red-400">Reiniciar todo (incluye claves)</button> -->
    </div>

    <!-- Pestañas de Selección (Julia/Marco) -->
    <!-- MODIFICADO: Se muestran siempre que no haya una categoría abierta (como antes) -->
    <div class="flex justify-center mb-8" x-show="openCategoryIndex.julia === null && openCategoryIndex.marco === null">
      <div class="inline-flex rounded-full shadow-md overflow-hidden">
        <!-- MODIFICADO: El @click llama a requestTabSwitch -->
        <button
                @click="requestTabSwitch('julia')"
                :class="{
                        'bg-gradient-to-r from-pink-500 to-red-500 text-white': activeTab === 'julia',
                        'bg-white text-gray-700 hover:bg-pink-50': activeTab !== 'julia'
                    }"
                class="tab-button px-16 py-2 font-medium rounded-full transition-all duration-300 focus:outline-none">
          Julia
        </button>
        <!-- MODIFICADO: El @click llama a requestTabSwitch -->
        <button
                @click="requestTabSwitch('marco')"
                :class="{
                        'bg-gradient-to-r from-teal-400 to-cyan-500 text-white': activeTab === 'marco',
                        'bg-white text-gray-700 hover:bg-teal-50': activeTab !== 'marco'
                    }"
                class="tab-button marco px-16 py-2 rounded-full ml-5 duration-300 focus:outline-none">
          Marco
        </button>
      </div>
    </div>

    <!-- Contenedor Principal de Actividades -->
    <div class="max-w-3xl mx-auto">

      <!-- ******************** -->
      <!-- Actividades de Julia -->
      <!-- ******************** -->
      <!-- MODIFICADO: Añadido chequeo de isAuthenticated.julia -->
      <div x-show="activeTab === 'julia' && isAuthenticated.julia" x-transition>
        <!-- Vista Lista Principal Julia (si no hay categoría abierta) -->
        <div class="card p-6 mb-8" x-show="openCategoryIndex.julia === null">
          <!-- ... (contenido interno sin cambios) ... -->
          <div class="text-center bg-gradient-to-r from-pink-500 to-red-500 rounded-full">
            <h2 class="text-4xl font-bold text-white p-3">Julia</h2>
          </div>
          <div class="space-y-3">
            <template x-for="(activity, index) in juliaActivities" :key="index">
              <div> <!-- Contenedor para cada item -->
                <!-- Enlace directo -->
                <template x-if="activity.type === 'link'">
                  <a :href="activity.link" target="_blank"
                     class="activity-item block p-4 rounded-lg bg-gray-100 shadow-sm hover:shadow-2xl hover:border-l-[#ff6b6b] hover:bg-gray-300"
                     :class="{ 'visited': activity.visited }"
                     @click="markVisited('julia', index)">
                    <div class="flex items-center">
                      <div class="bg-pink-100 p-3 rounded-lg mr-4 flex-shrink-0"
                           :class="{ 'bg-pink-200': activity.visited }">
                        <i :class="activity.icon" class="text-pink-500 text-xl"></i>
                      </div>
                      <div class="flex-grow">
                        <h3 class="font-medium text-gray-800" x-text="activity.title"></h3>
                        <p class="text-sm text-gray-500" x-text="activity.description"></p>
                      </div>
                      <div class="ml-auto flex-shrink-0 flex items-center space-x-2">
                        <span x-show="activity.visited"
                              class="text-xs bg-pink-100 text-pink-600 px-2 py-1 rounded-full">!! Completado !!</span>
                        <i class="fas fa-external-link-alt text-gray-400"></i>
                      </div>
                    </div>
                  </a>
                </template>
                <!-- Categoría (Clickable Div) -->
                <template x-if="activity.type === 'category'">
                  <div @click="toggleCategory('julia', index)"
                       class="activity-item cursor-pointer p-4 rounded-lg bg-gray-100 shadow-sm hover:shadow-2xl hover:border-l-[#ff6b6b] hover:bg-gray-300">
                    <div class="flex items-center">
                      <div class="bg-pink-100 p-3 rounded-lg mr-4 flex-shrink-0">
                        <i :class="activity.icon" class="text-pink-500 text-xl"></i>
                      </div>
                      <div class="flex-grow">
                        <h3 class="font-medium text-gray-800" x-text="activity.title"></h3>
                        <p class="text-sm text-gray-500" x-text="activity.description"></p>
                      </div>
                      <div class="ml-auto flex-shrink-0">
                        <i class="fas fa-chevron-right text-gray-400"></i>
                      </div>
                    </div>
                  </div>
                </template>
              </div>
            </template>
          </div>
        </div>

        <!-- Vista Submenú Julia (si hay categoría abierta) -->
        <!-- MODIFICADO: El x-show principal ya controla la autenticación -->
        <div class="card p-6 mb-8" x-show="openCategoryIndex.julia !== null" x-transition>
          <!-- ... (contenido interno sin cambios) ... -->
          <template x-if="openCategoryIndex.julia !== null"> <!-- Evita error si es null -->
            <div> <!-- Necesario para que x-if funcione bien con template -->
              <!-- Botón Volver y Título de Categoría -->
              <div class="flex items-center  mb-6">
                <button @click="toggleCategory('julia', openCategoryIndex.julia)"
                        class="mr-4 text-gray-500 hover:text-gray-700 text-2xl">
                  <i class="fas fa-arrow-left"></i>
                </button>
                <div class="flex items-center space-x-3">
                  <div class="bg-pink-100 p-3 rounded-lg">
                    <i :class="juliaActivities[openCategoryIndex.julia].icon" class="text-pink-500 text-xl"></i>
                  </div>
                  <div>
                    <h2 class="text-2xl font-bold text-[--julia-color]"
                        x-text="juliaActivities[openCategoryIndex.julia].title"></h2>
                    <p class="text-sm text-gray-500" x-text="juliaActivities[openCategoryIndex.julia].description"></p>
                  </div>
                </div>
              </div>
              <!-- Lista de Sub-Actividades -->
              <div class="space-y-3">
                <template x-for="(subActivity, subIndex) in juliaActivities[openCategoryIndex.julia].subActivities"
                          :key="subIndex">
                  <a :href="subActivity.link" target="_blank"
                     @click="markSubVisited('julia', openCategoryIndex.julia, subIndex)"
                     class="activity-item block p-4 rounded-lg bg-gray-100 shadow-sm hover:shadow-md hover:border-l-[#ff6b6b] hover:bg-gray-300"
                     :class="{ 'visited': subActivity.visited }">
                    <div class="flex items-center">
                      <div class="bg-pink-100 p-3 rounded-lg mr-4 flex-shrink-0"
                           :class="{ 'bg-pink-200': subActivity.visited }">
                        <i :class="subActivity.icon || 'fas fa-link'" class="text-pink-500 text-lg"></i>
                      </div>
                      <div class="flex-grow">
                        <h3 class="font-medium text-gray-800" x-text="subActivity.title"></h3>
                        <p class="text-sm text-gray-500" x-text="subActivity.description || ''"></p>
                        <!-- Añadir description si existe -->
                      </div>
                      <div class="ml-auto flex-shrink-0 flex items-center space-x-2">
                        <span x-show="subActivity.visited"
                              class="text-xs bg-pink-100 text-pink-600 px-2 py-1 rounded-full">!! Completado !!</span>
                        <i class="fas fa-external-link-alt text-gray-400"></i>
                      </div>
                    </div>
                  </a>
                </template>
              </div>
            </div>
          </template>
        </div>
      </div>

      <!-- ******************** -->
      <!-- Actividades de Marco -->
      <!-- ******************** -->
      <!-- MODIFICADO: Añadido chequeo de isAuthenticated.marco -->
      <div x-show="activeTab === 'marco' && isAuthenticated.marco" x-transition>
        <!-- Vista Lista Principal Marco (si no hay categoría abierta) -->
        <div class="card p-6 mb-8" x-show="openCategoryIndex.marco === null">
          <!-- ... (contenido interno sin cambios) ... -->
          <div class="text-center mb-6 bg-gradient-to-r from-teal-400 to-cyan-500 rounded-full">
            <h2 class="text-4xl font-bold text-white p-3">Marco</h2>
            <!--<p class="text-black">10 años</p>-->
          </div>
          <div class="space-y-3">
            <template x-for="(activity, index) in marcoActivities" :key="index">
              <div> <!-- Contenedor para cada item -->
                <!-- Enlace directo -->
                <template x-if="activity.type === 'link'">
                  <a :href="activity.link" target="_blank"
                     class="activity-item marco block p-4 rounded-lg bg-gray-200 shadow-sm hover:shadow-md hover:border-l-[--marco-color]"
                     :class="{ 'visited': activity.visited }"
                     @click="markVisited('marco', index)">
                    <div class="flex items-center">
                      <div class="bg-teal-100 p-3 rounded-lg mr-4 flex-shrink-0"
                           :class="{ 'bg-teal-200': activity.visited }">
                        <i :class="activity.icon" class="text-teal-500 text-xl"></i>
                      </div>
                      <div class="flex-grow">
                        <h3 class="font-medium text-gray-800" x-text="activity.title"></h3>
                        <p class="text-sm text-gray-500" x-text="activity.description"></p>
                      </div>
                      <div class="ml-auto flex-shrink-0 flex items-center space-x-2">
                        <span x-show="activity.visited"
                              class="text-xs bg-teal-100 text-teal-600 px-2 py-1 rounded-full">!! Completado !!</span>
                        <i class="fas fa-external-link-alt text-gray-400"></i>
                      </div>
                    </div>
                  </a>
                </template>
                <!-- Categoría (Clickable Div) -->
                <template x-if="activity.type === 'category'">
                  <div @click="toggleCategory('marco', index)"
                       class="activity-item marco cursor-pointer p-4 rounded-lg bg-gray-200 shadow-sm hover:shadow-md hover:border-l-[--marco-color]">
                    <div class="flex items-center">
                      <div class="bg-teal-100 p-3 rounded-lg mr-4 flex-shrink-0">
                        <i :class="activity.icon" class="text-teal-500 text-xl"></i>
                      </div>
                      <div class="flex-grow">
                        <h3 class="font-medium text-gray-800" x-text="activity.title"></h3>
                        <p class="text-sm text-gray-500" x-text="activity.description"></p>
                      </div>
                      <div class="ml-auto flex-shrink-0">
                        <i class="fas fa-chevron-right text-gray-400"></i>
                      </div>
                    </div>
                  </div>
                </template>
              </div>
            </template>
          </div>
        </div>

        <!-- Vista Submenú Marco (si hay categoría abierta) -->
        <!-- MODIFICADO: El x-show principal ya controla la autenticación -->
        <div class="card p-6 mb-8" x-show="openCategoryIndex.marco !== null" x-transition>
          <!-- ... (contenido interno sin cambios) ... -->
          <template x-if="openCategoryIndex.marco !== null"> <!-- Evita error si es null -->
            <div> <!-- Necesario para que x-if funcione bien con template -->
              <!-- Botón Volver y Título de Categoría -->
              <div class="flex items-center mb-6">
                <button @click="toggleCategory('marco', openCategoryIndex.marco)"
                        class="mr-4 text-gray-500 hover:text-gray-700 text-2xl">
                  <i class="fas fa-arrow-left"></i>
                </button>
                <div class="flex items-center space-x-3">
                  <div class="bg-teal-100 p-3 rounded-lg">
                    <i :class="marcoActivities[openCategoryIndex.marco].icon" class="text-teal-500 text-xl"></i>
                  </div>
                  <div>
                    <h2 class="text-2xl font-bold text-[--marco-color]"
                        x-text="marcoActivities[openCategoryIndex.marco].title"></h2>
                    <p class="text-sm text-gray-500" x-text="marcoActivities[openCategoryIndex.marco].description"></p>
                  </div>
                </div>
              </div>
              <!-- Lista de Sub-Actividades -->
              <div class="space-y-3">
                <template x-for="(subActivity, subIndex) in marcoActivities[openCategoryIndex.marco].subActivities"
                          :key="subIndex">
                  <a :href="subActivity.link" target="_blank"
                     @click="markSubVisited('marco', openCategoryIndex.marco, subIndex)"
                     class="activity-item marco block p-4 rounded-lg bg-gray-200 shadow-sm hover:shadow-md hover:border-l-[--marco-color]"
                     :class="{ 'visited': subActivity.visited }">
                    <div class="flex items-center">
                      <div class="bg-teal-100 p-3 rounded-lg mr-4 flex-shrink-0"
                           :class="{ 'bg-teal-200': subActivity.visited }">
                        <i :class="subActivity.icon || 'fas fa-link'" class="text-teal-500 text-lg"></i>
                      </div>
                      <div class="flex-grow">
                        <h3 class="font-medium text-gray-800" x-text="subActivity.title"></h3>
                        <p class="text-sm text-gray-500" x-text="subActivity.description || ''"></p>
                        <!-- Añadir description si existe -->
                      </div>
                      <div class="ml-auto flex-shrink-0 flex items-center space-x-2">
                        <span x-show="subActivity.visited"
                              class="text-xs bg-teal-100 text-teal-600 px-2 py-1 rounded-full">!! Completado !!</span>
                        <i class="fas fa-external-link-alt text-gray-400"></i>
                      </div>
                    </div>
                  </a>
                </template>
              </div>
            </div>
          </template>
        </div>
      </div>

    </div> <!-- Fin Contenedor Principal de Actividades -->

  </div>

  <script src="index.js"></script>
</body>

</html>